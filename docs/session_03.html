<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="date" content="2018-08-01" />

<title>Session 3</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />
<link rel="stylesheet" href="https://afeld.github.io/emoji-css/emoji.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Core R Course</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="proposal.html">About this course</a>
    </li>
    <li>
      <a href="system-requirements.html">System Requirements</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Sessions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="session_01.html">Session 1 – July 18</a>
    </li>
    <li>
      <a href="session_02_answers.html">Session 2 – July 25</a>
    </li>
    <li>
      <a href="session_03_answers.html">Session 3 – August 1</a>
    </li>
    <li>
      <a href="session_04.html">Session 4 – August 8</a>
    </li>
    <li>
      <a href="session_05_answers.html">Session 5 – August 15</a>
    </li>
    <li>
      <a href="session_06_answers.html">Session 6 – August 22</a>
    </li>
    <li>
      <a href="session_07.html">Session 7 – August 29</a>
    </li>
    <li>
      <a href="session_08.html">Session 8 – September 5</a>
    </li>
    <li>
      <a href="slides/working-with-files.html">Extra - Working with Files</a>
    </li>
    <li>
      <a href="slides/rmarkdown.html">Extra - R Markdown</a>
    </li>
    <li>
      <a href="session_extra_03.html">Extra - Replace Excel</a>
    </li>
    <li>
      <a href="session_extra_04.html">Extra - Project Template</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Materials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="session_01_materials.html">Session 1</a>
    </li>
    <li>
      <a href="session_03_materials.html">Session 3</a>
    </li>
    <li>
      <a href="session_04_materials.html">Session 4</a>
    </li>
    <li>
      <a href="session_05_materials.html">Session 5</a>
    </li>
    <li>
      <a href="session_06_materials.html">Session 6</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="resources.html">Resources</a>
</li>
<li>
  <a href="https://github.com/gerkelab/core-r-course">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Session 3</h1>
<h4 class="date"><em>August 1, 2018</em></h4>

</div>


<div id="links" class="section level2">
<h2>Links</h2>
<ul>
<li><a href="session_03_materials.html">Materials</a></li>
<li><a href="session_03_answers.html">This page with the code results</a></li>
</ul>
</div>
<div id="review" class="section level2">
<h2>Review</h2>
<div id="packages" class="section level3">
<h3>Packages</h3>
<p>How do you install a package from the R prompt, like <span class="pkg">readxl</span>?</p>
<details>
<p><summary>Answer</summary></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</a></code></pre></div>
</details>
<p>How do you load a package from the R prompt, like <span class="pkg">dplyr</span></p>
<details>
<p><summary>Answer</summary></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a></code></pre></div>
</details>
<p>How can you use RStudio to load a package?</p>
<details>
<p><summary>Answer</summary></p>
<div class="img-center">
<div class="figure">
<img src="images/rstudio-09-packages.png" alt="RStudio Packages Pane" class="img-mw500" />
<p class="caption">RStudio Packages Pane</p>
</div>
</div>
</details>
<p>Okay, but what <em>is</em> a package?</p>
<details>
<p><summary>Answer</summary></p>
<p>A package contains:</p>
<ol style="list-style-type: decimal">
<li>Functions</li>
<li>Documentation</li>
<li><em>Vignettes</em></li>
<li><em>Data</em></li>
</ol>
</details>
</div>
<div id="data-types" class="section level3">
<h3>Data Types</h3>
<p>What data type are each of the following?</p>
<table>
<thead>
<tr class="header">
<th align="center">Type</th>
<th align="left">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"></td>
<td align="left"><code>1L</code></td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="left"><code>3.14</code>, <code>1.23e-4</code></td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="left"><code>&quot;apple&quot;</code></td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="left"><code>TRUE</code>, <code>FALSE</code></td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="left"><code>c(...)</code></td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="left"><code>list(...)</code></td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="left"><code>data.frame(...)</code></td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="left"><code>data_frame(...)</code></td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="left"><code>NA</code></td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="left"><code>NULL</code></td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="left"><code>factor(letters)</code></td>
</tr>
</tbody>
</table>
<details>
<summary>Answer</summary> integer, double, character, logical, vector, list, data.frame, tibble, N/A (missing), Null and factor
</details>
<p>Run the following command. It will create 3 variables: <code>x</code>, <code>y</code>, and <code>z</code>. Without printing the variables, how can you tell what data type they are?</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">source</span>(<span class="st">&quot;https://git.io/fNrm9&quot;</span>)</a></code></pre></div>
<details>
<p><summary>Answer</summary></p>
<p>Here’s the code that was run:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">setNames</span>(<span class="kw">sample</span>(letters, <span class="dv">10</span>), LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>])</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">z &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">z[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">2</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">y</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">z</a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">class</span>(x)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">class</span>(y)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="kw">class</span>(z)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw">is.integer</span>(x)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="kw">is.character</span>(y)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="kw">is.na</span>(z)</a></code></pre></div>
</details>
</div>
<div id="workspaces-rstudio-projects" class="section level3">
<h3>Workspaces &amp; RStudio Projects</h3>
<p>In <a href="session_02.html#work_with_your_project">the last session</a>, we created an RStudio project and an example R script.</p>
<ol style="list-style-type: decimal">
<li>Re-open the project we created (or <a href="session_02.html#create_an_rstudio_project">create a new project</a>).</li>
<li>What is the current working directory?</li>
<li>Use the <span class="rstudio-tab">File</span> pane to navigate to your desktop (or another folder on your computer).</li>
<li>How can you quickly navigate back to the working directory?</li>
</ol>
<p>Open <code>example_single_patient.R</code> from our previous session and add the following lines.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">example &lt;-<span class="st"> </span><span class="kw">data_frame</span>(</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  <span class="dt">patient_id =</span> patient_id,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="dt">age_dx =</span> age_at_diagnosis,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="dt">age_visit =</span> age_at_visit,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="dt">tumor_size =</span> tumor_size,</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  <span class="dt">site_code =</span> site_code</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">)</a></code></pre></div>
<p>Clear your workspace (<a href="session_01.html#clearing_your_session">quick refresher here</a>) and then source the script.</p>
<p>View the tibble that is stored in <code>example</code>.</p>
<pre><code># A tibble: 5 x 5
  patient_id age_dx age_visit tumor_size site_code
       &lt;dbl&gt;  &lt;dbl&gt;     &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;    
1    5554321     54        54        9.5 C220     
2    5554321     54        55        9.5 C400     
3    5554321     54        56        9.7 C412     
4    5554321     54        57        9.9 C220     
5    5554321     54        58       10.1 C400     </code></pre>
</div>
</div>
<div id="overview" class="section level2">
<h2>Overview</h2>
<ol style="list-style-type: decimal">
<li><p><a href="#functions">More Functions</a></p></li>
<li><p><a href="#import_data">Import Data</a></p></li>
<li><p><a href="#data_processing">Data Processing with <code>dplyr</code></a></p></li>
</ol>
</div>
<div id="functions" class="section level2">
<h2>Functions</h2>
<div id="functions-that-work-with-vectors" class="section level3">
<h3>Functions that work with vectors</h3>
<p>So far we’ve primarily seen vectors that operate on single values or that take single-valued arguments.</p>
<p>But as we’ve seen, R is a <em>vectorized language</em>.</p>
<p>Try using the following functions on the variables we created in <code>example_single_patient.R</code> in <a href="session_02.html#work_with_your_project">Session 2</a>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">age_at_visit &lt;-<span class="st"> </span><span class="dv">54</span><span class="op">:</span><span class="dv">58</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">tumor_size &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">9.5</span>, <span class="fl">9.5</span>, <span class="fl">9.7</span>, <span class="fl">9.9</span>, <span class="fl">10.1</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">site_code &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C220&quot;</span>, <span class="st">&quot;C400&quot;</span>, <span class="st">&quot;C412&quot;</span>, <span class="st">&quot;C220&quot;</span>, <span class="st">&quot;C400&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">min</span>(tumor_size)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">max</span>(tumor_size)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">mean</span>(tumor_size)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">median</span>(tumor_size)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw">var</span>(tumor_size)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw">sd</span>(tumor_size)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="kw">IQR</span>(tumor_size)</a></code></pre></div>
<p>Those functions all come from base R (standard R library).</p>
<p>The following functions are given to us from <code>dplyr</code>. We have dplyr loaded if we’ve run <code>library(tidyverse)</code>, but I’ll include the <code>dplyr::</code> first as a reminder that that’s where these functions come from.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">dplyr<span class="op">::</span><span class="kw">first</span>(site_code)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">dplyr<span class="op">::</span><span class="kw">last</span>(age_at_visit)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">dplyr<span class="op">::</span><span class="kw">nth</span>(site_code, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">dplyr<span class="op">::</span><span class="kw">n_distinct</span>(site_code)</a></code></pre></div>
<p>All of these functions return a single value. Try the following. What happens and why?</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">tumor_size <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">age_at_visit <span class="op">-</span><span class="st"> </span>age_at_diagnosis</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw">paste</span>(<span class="st">&quot;Site Code:&quot;</span>, site_code)</a></code></pre></div>
<p>Because R is vectorized, operations are applied to the whole vector.</p>
</div>
<div id="dot-dot-dot" class="section level3">
<h3>Dot, dot, dot</h3>
<p>R has a somewhat unique addition for writing and using functions: the dot-dot-dot (<code>...</code>).</p>
<p>The <code>...</code> is used in two ways:</p>
<ol style="list-style-type: decimal">
<li><p>To allow you to include an unknown number of values.</p>
<pre><code>paste &lt;- function (..., sep = &quot; &quot;, collapse = NULL) </code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">paste</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)</a></code></pre></div></li>
<li><p>To allow you to pass arguments to an underlying function.</p>
<pre><code>rep &lt;- function (x, ...)  .Primitive(&quot;rep&quot;)</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">rep</span>(1L, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">rep</span>(1L, <span class="dt">times =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw">rep.int</span>(1L, <span class="dt">times =</span> <span class="dv">4</span>)</a></code></pre></div></li>
</ol>
</div>
</div>
<div id="before-we-begin" class="section level2">
<h2>Before We Begin</h2>
<div id="before-we-begin-1" class="section level3">
<h3>Before We Begin</h3>
<blockquote>
<p>Whenever you’re learning a new tool, for a long time you’re going to suck. It’s going to be very frustrating. But the good news is that that is typical, it’s something that happens to everyone, and it’s only temporary.</p>
<p>Unfortunately, there is no way to go from knowing nothing about a subject to knowing something about the subject … without going through a period of great frustration and much suckiness.</p>
<p>But remember, when you’re getting frustrated, that’s a good thing, it’s typical, it’s temporary. Keep pushing through and in time it will become second nature.</p>
<p>Hadley Wickham, <a href="https://youtu.be/8SGif63VW6E?t=4m7s">UseR!2014</a></p>
</blockquote>
</div>
</div>
<div id="dplyr-basics" class="section level2">
<h2>dplyr Basics</h2>
<p><span class="pkg">dplyr</span> provides a wide range of functions for data manipulation and transformation. In this session, we’re going to cover 5 key dplyr functions:</p>
<table>
<thead>
<tr class="header">
<th align="center">Function</th>
<th align="right">Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>filter()</code></td>
<td align="right">Pick out observations by their values</td>
</tr>
<tr class="even">
<td align="center"><code>arrange()</code></td>
<td align="right">Reorder the rows</td>
</tr>
<tr class="odd">
<td align="center"><code>select()</code></td>
<td align="right">Pick out variables by their names</td>
</tr>
<tr class="even">
<td align="center"><code>mutate()</code></td>
<td align="right">Create new variables using existing variables</td>
</tr>
<tr class="odd">
<td align="center"><code>summarize()</code></td>
<td align="right">Collapse many values into a single summary</td>
</tr>
</tbody>
</table>
<p>All <span class="pkg">dplyr</span> verbs work similarly:</p>
<ol style="list-style-type: decimal">
<li><p>The first argument is a data frame.</p></li>
<li><p>Subsequent arguments describe how the verb will transform the data frame, using column names without <code>&quot;column_name&quot;</code></p></li>
<li><p>The output is a new data frame.</p></li>
</ol>
<div id="filter" class="section level3">
<h3><code>filter()</code></h3>
<p><img src="images/dplyr-filter.png" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">filter</span>(example, site_code <span class="op">==</span><span class="st"> &quot;C400&quot;</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">filter</span>(example, tumor_size <span class="op">&gt;</span><span class="st"> </span><span class="fl">9.5</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">filter</span>(example, age_visit <span class="op">&lt;</span><span class="st"> </span><span class="kw">max</span>(age_dx))</a></code></pre></div>
<p>Multiple arguments to <code>filter()</code> are combined with <code>&amp;</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">filter</span>(example, site_code <span class="op">==</span><span class="st"> &quot;C400&quot;</span>, tumor_size <span class="op">&gt;</span><span class="st"> </span><span class="fl">9.5</span>)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">filter</span>(example, site_code <span class="op">==</span><span class="st"> &quot;C400&quot;</span> <span class="op">&amp;</span><span class="st"> </span>tumor_size <span class="op">&gt;</span><span class="st"> </span><span class="fl">9.5</span>)</a></code></pre></div>
<p>To build more complex filter combinations, use</p>
<div class="img-center">
<table>
<thead>
<tr class="header">
<th>Operation</th>
<th>Symbol</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>and</strong></td>
<td><code>&amp;</code></td>
</tr>
<tr class="even">
<td><strong>or</strong></td>
<td><code>|</code></td>
</tr>
<tr class="odd">
<td><strong>not</strong></td>
<td><code>!</code></td>
</tr>
</tbody>
</table>
</div>
<!--
This diagram illustrates the complete set of 

![Boolean Operations from [r4ds](http://r4ds.had.co.nz/transform.html#logical-operators).](images/r4ds_diagrams_transform-logical.png)
-->
<div id="filtering-for-an-item-in-a-group" class="section level4">
<h4>Filtering for an item in a group</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">filter</span>(example, site_code <span class="op">==</span><span class="st"> &quot;C412&quot;</span> <span class="op">|</span><span class="st"> &quot;C220&quot;</span>) <span class="co"># doesn&#39;t work</span></a></code></pre></div>
<pre><code>Error in filter_impl(.data, quo): Evaluation error: operations are possible only for numeric, logical or complex types.</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">filter</span>(example, site_code <span class="op">==</span><span class="st"> &quot;C412&quot;</span> <span class="op">|</span><span class="st"> </span>site_code <span class="op">==</span><span class="st"> &quot;C220&quot;</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="kw">filter</span>(example, site_code <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;C412&quot;</span>, <span class="st">&quot;C220&quot;</span>))</a></code></pre></div>
</div>
<div id="missing-values" class="section level4">
<h4>Missing values</h4>
<p>Filtering can be tricky when there are missing values – <code>NA</code>. Or sometimes, you’re <em>trying to find</em> the missing values.</p>
<p>It’s important to keep in mind that <code>NA</code>s are “contagious” in R, meaning that the result of almost any operation involving an <code>NA</code> will be an <code>NA</code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="ot">NA</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">42</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="ot">NA</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="ot">NA</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="ot">NA</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></a></code></pre></div>
<p>Here’s an example that helps to illustrate why <code>NA == NA</code> isn’t <code>TRUE</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="co"># Let x be Mary&#39;s age. We don&#39;t know how old she is.</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co"># Let y be John&#39;s age. We don&#39;t know how old he is.</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">y &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"></a>
<a class="sourceLine" id="cb22-7" data-line-number="7"><span class="co"># Are John and Mary the same age?</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8">x <span class="op">==</span><span class="st"> </span>y</a></code></pre></div>
<pre><code>[1] NA</code></pre>
<p><code>filter()</code> keeps only the rows where the condition is <code>TRUE</code> and drops the rows where it is <code>FALSE</code> or <code>NA</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="kw">filter</span>(df, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="kw">filter</span>(df, <span class="kw">is.na</span>(x) <span class="op">|</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a></code></pre></div>
</div>
</div>
<div id="arrange" class="section level3">
<h3><code>arrange()</code></h3>
<div class="img-center">
<p><img src="images/dplyr-arrange.png" class="img-mw500" /></p>
</div>
<p>To arrange, or sort, the rows according to values in a given column, use <code>arrange()</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">arrange</span>(example, site_code)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="kw">arrange</span>(example, <span class="kw">desc</span>(site_code))</a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="kw">arrange</span>(example, site_code, tumor_size)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="kw">arrange</span>(example, <span class="kw">desc</span>(tumor_size), site_code)</a></code></pre></div>
</div>
<div id="select" class="section level3">
<h3><code>select()</code></h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">select</span>(example, age_dx, tumor_size)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw">select</span>(example, age_dx<span class="op">:</span>tumor_size)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="kw">select</span>(example, <span class="op">-</span>(patient_id<span class="op">:</span>age_visit))</a></code></pre></div>
<div id="helper-functions-for-select" class="section level4">
<h4>Helper functions for <code>select()</code></h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">select</span>(example, <span class="kw">starts_with</span>(<span class="st">&quot;age&quot;</span>))</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw">select</span>(example, <span class="kw">ends_with</span>(<span class="st">&quot;id&quot;</span>))</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="kw">select</span>(example, <span class="kw">contains</span>(<span class="st">&quot;code&quot;</span>))</a></code></pre></div>
</div>
<div id="renaming" class="section level4">
<h4>Renaming</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">select</span>(example, <span class="dt">code =</span> site_code)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="kw">rename</span>(example, <span class="dt">code =</span> site_code)</a></code></pre></div>
</div>
</div>
<div id="mutate" class="section level3">
<h3><code>mutate()</code></h3>
<p><img src="images/dplyr-mutate.png" /></p>
<p><img src="images/dplyr-window-function.png" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">mutate</span>(example, <span class="dt">follow_up =</span> age_visit <span class="op">-</span><span class="st"> </span>age_dx)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw">mutate</span>(example, <span class="dt">elapsed =</span> age_visit <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(age_visit))</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="kw">mutate</span>(example, </a>
<a class="sourceLine" id="cb29-4" data-line-number="4">       <span class="dt">tumor_size =</span> tumor_size <span class="op">*</span><span class="st"> </span><span class="dv">10</span>, </a>
<a class="sourceLine" id="cb29-5" data-line-number="5">       <span class="dt">tumor_size_mm =</span> tumor_size <span class="op">*</span><span class="dv">100</span>)</a></code></pre></div>
<div id="recoding-or-conditionally-changing-values" class="section level4">
<h4>Recoding or conditionally changing values</h4>
<p>Often you’ll want to replace certain values of a variable with another value. There are several helpful functions provided by <span class="pkg">dplyr</span> that let you do this, including:</p>
<ol style="list-style-type: decimal">
<li><p><code>recode()</code>: Replace character values with <code>&quot;old&quot; = &quot;new&quot;</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">var =<span class="st"> </span><span class="kw">recode</span>(var, <span class="st">&quot;old&quot;</span> =<span class="st"> &quot;new&quot;</span>, <span class="st">&quot;OLD&quot;</span> =<span class="st"> &quot;new&quot;</span>)</a></code></pre></div></li>
<li><p><code>if_else()</code>: Use logical statements to change the value.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">var =<span class="st"> </span><span class="kw">if_else</span>(CONDITION, VALUE_IF_TRUE, VALUE_IF_FALSE)</a></code></pre></div></li>
</ol>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">mutate</span>(example, <span class="dt">site_code =</span> <span class="kw">recode</span>(site_code, <span class="st">&quot;C412&quot;</span> =<span class="st"> &quot;C999&quot;</span>))</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="kw">mutate</span>(example, <span class="dt">tumor_size =</span> <span class="kw">if_else</span>(site_code <span class="op">==</span><span class="st"> &quot;C400&quot;</span>, tumor_size <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, tumor_size))</a></code></pre></div>
</div>
</div>
<div id="summarize" class="section level3">
<h3><code>summarize()</code></h3>
<p><img src="images/dplyr-summarize.png" /></p>
<p><img src="images/dplyr-summary-function.png" /></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">summarize</span>(example, <span class="kw">min</span>(age_dx))</a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw">summarize</span>(example, <span class="dt">max_tumor_size =</span> <span class="kw">max</span>(tumor_size))</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="kw">summarize</span>(example, <span class="dt">tumor_size_median =</span> <span class="kw">median</span>(tumor_size),<span class="dt">tumor_size_mean =</span> <span class="kw">mean</span>(tumor_size), <span class="dt">age_visit =</span> <span class="kw">max</span>(age_visit))</a></code></pre></div>
</div>
<div id="group_by-summarize" class="section level3">
<h3><code>group_by()</code> &amp; <code>summarize()</code></h3>
<p><img src="images/dplyr-group_by.png" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">example_grp &lt;-<span class="st"> </span><span class="kw">group_by</span>(example, site_code)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="kw">summarize</span>(example_grp, </a>
<a class="sourceLine" id="cb34-3" data-line-number="3">  <span class="dt">tumor_size_mean =</span> <span class="kw">mean</span>(tumor_size), </a>
<a class="sourceLine" id="cb34-4" data-line-number="4">  <span class="dt">age_mean =</span> <span class="kw">mean</span>(age_dx))</a>
<a class="sourceLine" id="cb34-5" data-line-number="5"></a>
<a class="sourceLine" id="cb34-6" data-line-number="6">example_grp &lt;-<span class="st"> </span><span class="kw">group_by</span>(example, site_code, patient_id)</a>
<a class="sourceLine" id="cb34-7" data-line-number="7"><span class="kw">summarize</span>(example_grp, </a>
<a class="sourceLine" id="cb34-8" data-line-number="8">  <span class="dt">tumor_size_mean =</span> <span class="kw">mean</span>(tumor_size), </a>
<a class="sourceLine" id="cb34-9" data-line-number="9">  <span class="dt">age_mean =</span> <span class="kw">mean</span>(age_dx))</a></code></pre></div>
</div>
<div id="group_by-count" class="section level3">
<h3><code>group_by()</code> &amp; <code>count()</code></h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">count</span>(example, site_code)</a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">count</span>(example, patient_id)</a>
<a class="sourceLine" id="cb35-3" data-line-number="3"></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="co"># Groups: site_code, patient_id</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="kw">count</span>(example_grp)</a></code></pre></div>
</div>
</div>
<div id="combining-dplyr-verbs" class="section level2">
<h2>Combining dplyr Verbs</h2>
<p>Let’s say we want to calculate the <strong>average age</strong> and <strong>tumor size</strong> (in cm) by <strong>site code</strong> for each <strong>patient</strong>.</p>
<p>To do this we’ll take our <code>example</code> data and</p>
<ol style="list-style-type: decimal">
<li><p>Group by <code>site_code</code> and <code>patient_id</code></p></li>
<li><p>Convert tumor size from <em>cm</em> to <em>mm</em></p></li>
<li><p>Summarize <code>tumor_size</code> and <code>age_dx</code> by their average.</p></li>
</ol>
<p>In <span class="pkg">dplyr</span> speak:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">ex1 &lt;-<span class="st"> </span><span class="kw">group_by</span>(example, site_code, patient_id)</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">ex2 &lt;-<span class="st"> </span><span class="kw">mutate</span>(ex1, <span class="dt">tumor_size =</span> tumor_size <span class="op">*</span><span class="st"> </span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb36-3" data-line-number="3">ex3 &lt;-<span class="st"> </span><span class="kw">summarize</span>(ex2, </a>
<a class="sourceLine" id="cb36-4" data-line-number="4">  <span class="dt">tumor_size_mean =</span> <span class="kw">mean</span>(tumor_size), </a>
<a class="sourceLine" id="cb36-5" data-line-number="5">  <span class="dt">age_mean =</span> <span class="kw">mean</span>(age_dx))</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">ex3</a></code></pre></div>
<p>Notice that the output from each step is the input to the next step. Also, we don’t really need <code>ex1</code> or <code>ex2</code>, we just want the output which we’ve saved as <code>ex3</code>.</p>
<p>To make this much cleaner we can use the pipe operator.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">example <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(site_code, patient_id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">tumor_size =</span> tumor_size <span class="op">*</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="st">  </span><span class="kw">summarize</span>(</a>
<a class="sourceLine" id="cb37-5" data-line-number="5">    <span class="dt">tumor_size_mean =</span> <span class="kw">mean</span>(tumor_size),</a>
<a class="sourceLine" id="cb37-6" data-line-number="6">    <span class="dt">age_mean =</span> <span class="kw">mean</span>(age_dx)</a>
<a class="sourceLine" id="cb37-7" data-line-number="7">  )</a></code></pre></div>
<p>The pipe operator looks like this</p>
<div style="font-size: 5em; width: 100%; text-align: center;">
<code>%&gt;%</code>
</div>
<p>You can type it with</p>
<div class="img-center">
<p><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd> (Windows)</p>
<p><kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd> (Mac)</p>
</div>
<p>You say it like</p>
<div style="font-size: 3em; width: 100%; text-align: center;">
…and then…
</div>
<p>Re-read the code above:</p>
<ol style="list-style-type: decimal">
<li><p>Take <code>example</code> <strong>and then…</strong></p></li>
<li><p>Group by <strong>and then…</strong></p></li>
<li><p>Mutate <strong>and then…</strong></p></li>
<li><p>Summarize</p></li>
</ol>
<div class="bs-callout bs-callout-warning">
<p>The pipe operator is now ubiquitous in modern R code, but it’s not part of the R language.</p>
<p>Make sure that you load <span class="pkg">tidyverse</span> or <span class="pkg">dplyr</span> first!</p>
</div>
<div id="your-turn" class="section level4">
<h4>Your turn!</h4>
<p>Use the pipe operator and <span class="pkg">dplyr</span> verbs to complete the following task:</p>
<ol style="list-style-type: decimal">
<li><p>Use the <code>example</code> dataset</p></li>
<li><p>Filter out tumors smaller than <strong>9.7</strong></p></li>
<li><p>Calculate <code>follow_up</code> time as the number of years between diagnosis and the patient’s visit</p></li>
<li><p>Rename the <code>site_code</code> column to <code>code</code>.</p></li>
</ol>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="date" content="2018-09-05" />

<title>Session 8</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />
<link rel="stylesheet" href="https://afeld.github.io/emoji-css/emoji.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Core R Course</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="proposal.html">About this course</a>
    </li>
    <li>
      <a href="system-requirements.html">System Requirements</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Sessions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="session_01.html">Session 1 – July 18</a>
    </li>
    <li>
      <a href="session_02_answers.html">Session 2 – July 25</a>
    </li>
    <li>
      <a href="session_03_answers.html">Session 3 – August 1</a>
    </li>
    <li>
      <a href="session_04.html">Session 4 – August 8</a>
    </li>
    <li>
      <a href="session_05_answers.html">Session 5 – August 15</a>
    </li>
    <li>
      <a href="session_06_answers.html">Session 6 – August 22</a>
    </li>
    <li>
      <a href="session_07.html">Session 7 – August 29</a>
    </li>
    <li>
      <a href="session_08.html">Session 8 – September 5</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Materials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="session_01_materials.html">Session 1</a>
    </li>
    <li>
      <a href="session_03_materials.html">Session 3</a>
    </li>
    <li>
      <a href="session_04_materials.html">Session 4</a>
    </li>
    <li>
      <a href="session_05_materials.html">Session 5</a>
    </li>
    <li>
      <a href="session_06_materials.html">Session 6</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="resources.html">Resources</a>
</li>
<li>
  <a href="https://github.com/gerkelab/core-r-course">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Session 8</h1>
<h4 class="date"><em>September 5, 2018</em></h4>

</div>


<div id="review" class="section level2">
<h2>Review</h2>
<div id="working-with-strings" class="section level3">
<h3>Working with Strings</h3>
<p><strong>Question:</strong> You have a vector that contains two strings.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">txt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;pfx-003-sfx&quot;</span>, <span class="st">&quot;pfx-987-sfx&quot;</span>)</a></code></pre></div>
<p>Match the function that was used to the output that it created.</p>
<ol style="list-style-type: decimal">
<li><code>str_detect(txt, &quot;003&quot;)</code></li>
<li><code>str_extract(txt, &quot;\\d+&quot;)</code></li>
<li><code>str_remove(txt, &quot;-sfx&quot;)</code></li>
<li><code>str_c(txt, collapse = &quot; and &quot;)</code></li>
<li><code>str_replace(txt, &quot;pfx&quot;, &quot;prefix&quot;)</code></li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><code>c(&quot;prefix-003-sfx&quot;, &quot;prefix-987-sfx&quot;)</code></li>
<li><code>c(&quot;003&quot;, &quot;987&quot;)</code></li>
<li><code>c(&quot;pfx-003&quot;, &quot;pfx-987&quot;)</code></li>
<li><code>c(TRUE, FALSE)</code></li>
<li><code>&quot;pfx-003-sfx and pfx-987-sfx&quot;</code></li>
</ol>
<details>
<p><summary>Answers</summary></p>
<ol style="list-style-type: decimal">
<li>d; 2. b; 3. c; 4. e; 5. a</li>
</ol>
</details>
<p><strong>Question:</strong> The following ICD10 codes describe a selection of ICD codes for “Malignant melanomas of the skin”.</p>
<table>
<thead>
<tr class="header">
<th align="left">ICD Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C43</span></td>
<td align="left">Malignant melanoma of skin</td>
</tr>
<tr class="even">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C430</span></td>
<td align="left">Malignant melanoma of lip</td>
</tr>
<tr class="odd">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C431</span></td>
<td align="left">Malignant melanoma of eyelid, including canthus</td>
</tr>
<tr class="even">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C4310</span></td>
<td align="left">Malignant melanoma of unspecified eyelid, including canthus</td>
</tr>
<tr class="odd">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C4311</span></td>
<td align="left">Malignant melanoma of right eyelid, including canthus</td>
</tr>
<tr class="even">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C4312</span></td>
<td align="left">Malignant melanoma of left eyelid, including canthus</td>
</tr>
<tr class="odd">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C432</span></td>
<td align="left">Malignant melanoma of ear and external auricular canal</td>
</tr>
<tr class="even">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C4320</span></td>
<td align="left">Malignant melanoma of unsp ear and external auricular canal</td>
</tr>
<tr class="odd">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C4321</span></td>
<td align="left">Malignant melanoma of right ear and external auricular canal</td>
</tr>
<tr class="even">
<td align="left"><span style="color: #CD4F39; font-family: Fira Mono, monospace;">C4322</span></td>
<td align="left">Malignant melanoma of left ear and external auricular canal</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li><p>Describe in words all of the patterns you can find in the ICD code and its description.</p></li>
<li><p>How can you extract the specific location referred to in the description text?</p></li>
<li><p>How could you find all patients with melonoma located on the eyelid? On the ear?</p></li>
<li><p>Write a regular expression that finds ICD codes indicate melanoma on the <em>right side</em> of the body.</p></li>
</ol>
</div>
</div>
<div id="outline" class="section level2">
<h2>Outline</h2>
<ul>
<li><p>Homework and Sharing</p></li>
<li>Base R: The other side of R
<ul>
<li>Subsetting</li>
<li>Factors (forcats)</li>
</ul></li>
<li><p>Project Management</p></li>
<li>Looking Forward
<ul>
<li>Workshop format</li>
<li>Topics we can talk about</li>
</ul></li>
</ul>
</div>
<div id="show-and-tell" class="section level2">
<h2>Show and Tell</h2>
<p><img src="https://media.giphy.com/media/l2JejW7K5EDjFyT9m/giphy.gif" width="100%" /></p>
<details>
<p><summary>Who’s ready?</summary></p>
<img src="https://media.giphy.com/media/3orifdyb5uQljmxgeA/giphy.gif" width="100%" />
</details>
<details>
<p><summary>You’re Awesome!</summary></p>
<img src="https://media.giphy.com/media/xT5LMBXjnbVFzRLVZu/giphy.gif" width="100%" />
</details>
</div>
<div id="base-r-the-other-r" class="section level2">
<h2>Base R: The Other R</h2>
<div id="another-way-to-do-things" class="section level3">
<h3>Another way to do things</h3>
<p><strong>R</strong> is about 25 years old, or 42 if you count its “first version” <strong>S</strong>.</p>
<p><span class="pkg">dplyr</span>, on the other hand, started in October of 2012 but the version most consistent with the things that we’ve learned wasn’t released until <strong>October 2014</strong> – or 3.9 years ago.</p>
<p>This means that when you run into issues and search around online in places like <a href="https://stackoverflow.com/questions/tagged/r">StackOverflow</a>, you’ll often run into R code written in <em>base R</em>. It’s also useful to know a bit about base R functions when you need to do more programming-style work, as opposed to the data analysis workflows we’ve been learning.</p>
<p>This section is intended to give a very quick overview of several parts of base R that we haven’t talked about much, primarily to help you translate code you find online into <span class="pkg">dplyr</span>-based code that you’re used to.</p>
<p>We’ll use the <code>example</code> data frame from <a href="session_03_answers.html#workspaces__rstudio_projects">Session 3</a> for this section.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x</a></code></pre></div>
<pre><code># A tibble: 5 x 5
  patient_id age_dx age_visit tumor_size site_code
       &lt;dbl&gt;  &lt;dbl&gt;     &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;    
1    5554321     54        54        9.5 C220     
2    5554321     54        55        9.5 C400     
3    5554321     54        56        9.7 C412     
4    5554321     54        57        9.9 C220     
5    5554321     54        58       10.1 C400     </code></pre>
</div>
<div id="selecting-elements-of-a-vector" class="section level3">
<h3>Selecting Elements of a Vector</h3>
<p>First, let’s say that you have a vector.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">14</span>, <span class="dv">6</span>)</a></code></pre></div>
<p>You can get a particular element of the vector using <code>[ ]</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">v[<span class="dv">2</span>]</a></code></pre></div>
<pre><code>## [1] 14</code></pre>
<p><span class="muted">Sidenote: does R start counting elements from 0 or from 1?</span></p>
<p>You can extract more than one element by using a vector.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">v[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</a></code></pre></div>
<pre><code>## [1] 10  6</code></pre>
<p>You can discard elements with negative indices.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">v[<span class="op">-</span><span class="dv">2</span>]</a></code></pre></div>
<pre><code>## [1] 10  6</code></pre>
<p>And you can use <code>TRUE</code> and <code>FALSE</code> to discard elements that are in the same position as the <code>FALSE</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">v <span class="op">!=</span><span class="st"> </span><span class="dv">14</span></a></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">v[v <span class="op">!=</span><span class="st"> </span><span class="dv">14</span>]</a></code></pre></div>
<pre><code>## [1] 10  6</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">v[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]</a></code></pre></div>
<pre><code>## [1] 10  6</code></pre>
<p>Suppose this vector is actually a count of the number of fruit that we have. If the vector has names, we can use the names to select specific elements.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">names</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;kiwi&quot;</span>, <span class="st">&quot;lime&quot;</span>, <span class="st">&quot;mango&quot;</span>)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">v[<span class="st">&quot;mango&quot;</span>]</a></code></pre></div>
<pre><code>## mango 
##     6</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">v[<span class="kw">c</span>(<span class="st">&quot;kiwi&quot;</span>, <span class="st">&quot;lime&quot;</span>)]</a></code></pre></div>
<pre><code>## kiwi lime 
##   10   14</code></pre>
<p>Suppose instead of a vector, we have a list.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">l &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">  <span class="dt">orange =</span> <span class="dv">25</span>,</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">  <span class="dt">plum =</span> <span class="dv">13</span>,</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">  <span class="dt">quince =</span> <span class="dv">30</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5">)</a></code></pre></div>
<details>
<p><summary>Yes, it’s a real fruit</summary></p>
<img src="images/quince.jpg" />
</details>
<p>Lists are slightly more tricky. Using one set of <code>[ ]</code> gives you back another list with the elements in the brackets, or you can get a specific element with double brackets <code>[[ ]]</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">l[<span class="st">&quot;orange&quot;</span>]</a></code></pre></div>
<pre><code>## $orange
## [1] 25</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">l[<span class="kw">c</span>(<span class="st">&quot;orange&quot;</span>, <span class="st">&quot;plum&quot;</span>)]</a></code></pre></div>
<pre><code>## $orange
## [1] 25
## 
## $plum
## [1] 13</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">l[[<span class="st">&quot;quince&quot;</span>]]</a></code></pre></div>
<pre><code>## [1] 30</code></pre>
<p>The double brackets can only give you <strong>one</strong> entry; you’ll get an error if you try to get more than one.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">l[[<span class="kw">c</span>(<span class="st">&quot;orange&quot;</span>, <span class="st">&quot;plum&quot;</span>)]]</a></code></pre></div>
<pre><code>## Error in l[[c(&quot;orange&quot;, &quot;plum&quot;)]]: subscript out of bounds</code></pre>
<p>Did you notice the <code>$</code> in the output? That’s because the dollar sign is <em>yet another subsetting operator</em> and it works exactly the same as <code>[[ ]]</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">l<span class="op">$</span>plum</a></code></pre></div>
<pre><code>## [1] 13</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">l[[<span class="st">&quot;plum&quot;</span>]]</a></code></pre></div>
<pre><code>## [1] 13</code></pre>
<p>Why are there <del>two</del> three ways to subset lists? First: why does there need to be a difference between <code>[ ]</code> and <code>[[ ]]</code>?</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">l<span class="op">$</span>other &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;rambutan&quot;</span>, <span class="st">&quot;starfruit&quot;</span>, <span class="st">&quot;tomato&quot;</span>)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">l</a></code></pre></div>
<pre><code>## $orange
## [1] 25
## 
## $plum
## [1] 13
## 
## $quince
## [1] 30
## 
## $other
## [1] &quot;rambutan&quot;  &quot;starfruit&quot; &quot;tomato&quot;</code></pre>
<details>
<p><summary>Yup, it really is, too…</summary></p>
<img src="images/rambutan.png" />
</details>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">l[<span class="kw">c</span>(<span class="st">&quot;orange&quot;</span>, <span class="st">&quot;other&quot;</span>)]</a></code></pre></div>
<pre><code>## $orange
## [1] 25
## 
## $other
## [1] &quot;rambutan&quot;  &quot;starfruit&quot; &quot;tomato&quot;</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">l[[<span class="st">&quot;orange&quot;</span>]]</a></code></pre></div>
<pre><code>## [1] 25</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">l[[<span class="st">&quot;other&quot;</span>]]</a></code></pre></div>
<pre><code>## [1] &quot;rambutan&quot;  &quot;starfruit&quot; &quot;tomato&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">c</span>(l<span class="op">$</span>other, l<span class="op">$</span>orange)</a></code></pre></div>
<pre><code>## [1] &quot;rambutan&quot;  &quot;starfruit&quot; &quot;tomato&quot;    &quot;25&quot;</code></pre>
</div>
<div id="subsetting-columns-and-rows" class="section level3">
<h3>Subsetting Columns and Rows</h3>
<p>The syntax for data frames (or tibbles) is very similar. The only difference is that the single brackets <code>[ ]</code> take two arguments – <em>rows</em> and <em>columns</em> – and the double brackets <code>[[ ]]</code> (or <code>$</code>) return <em>columns</em>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">x</a></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   patient_id age_dx age_visit tumor_size site_code
##        &lt;dbl&gt;  &lt;dbl&gt;     &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;    
## 1    5554321     54        54        9.5 C220     
## 2    5554321     54        55        9.5 C400     
## 3    5554321     54        56        9.7 C412     
## 4    5554321     54        57        9.9 C220     
## 5    5554321     54        58       10.1 C400</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">x[<span class="dv">1</span>, <span class="dv">2</span>]</a></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   age_dx
##    &lt;dbl&gt;
## 1     54</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   age_dx age_visit
##    &lt;dbl&gt;     &lt;int&gt;
## 1     54        54
## 2     54        57</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">x[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="kw">c</span>(<span class="st">&quot;age_dx&quot;</span>, <span class="st">&quot;age_visit&quot;</span>)]</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   age_dx age_visit
##    &lt;dbl&gt;     &lt;int&gt;
## 1     54        54
## 2     54        55</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">x<span class="op">$</span>patient_id</a></code></pre></div>
<pre><code>## [1] 5554321 5554321 5554321 5554321 5554321</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">x[[<span class="st">&quot;age_dx&quot;</span>]]</a></code></pre></div>
<pre><code>## [1] 54 54 54 54 54</code></pre>
<p>What if you just want to select certain rows or certain columns?</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>), ]</a></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   patient_id age_dx age_visit tumor_size site_code
##        &lt;dbl&gt;  &lt;dbl&gt;     &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;    
## 1    5554321     54        54        9.5 C220     
## 2    5554321     54        57        9.9 C220</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">x[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   patient_id age_dx
##        &lt;dbl&gt;  &lt;dbl&gt;
## 1    5554321     54
## 2    5554321     54
## 3    5554321     54
## 4    5554321     54
## 5    5554321     54</code></pre>
<p>What does this code do?</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">x[x<span class="op">$</span>age_visit <span class="op">&gt;</span><span class="st"> </span>x<span class="op">$</span>age_dx, ]<span class="op">$</span>tumor_size</a></code></pre></div>
<pre><code>## [1]  9.5  9.7  9.9 10.1</code></pre>
<div id="in-dplyr-speak" class="section level4">
<h4>In <span class="pkg">dplyr</span>-speak</h4>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="co"># Base R</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2">x[, <span class="kw">c</span>(<span class="st">&quot;age_dx&quot;</span>, <span class="st">&quot;age_visit&quot;</span>)]</a></code></pre></div>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(age_dx, age_visit)</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   age_dx age_visit
##    &lt;dbl&gt;     &lt;int&gt;
## 1     54        54
## 2     54        55
## 3     54        56
## 4     54        57
## 5     54        58</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="co"># Base R</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>), ]</a></code></pre></div>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>))</a></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   patient_id age_dx age_visit tumor_size site_code
##        &lt;dbl&gt;  &lt;dbl&gt;     &lt;int&gt;      &lt;dbl&gt; &lt;chr&gt;    
## 1    5554321     54        54        9.5 C220     
## 2    5554321     54        57        9.9 C220</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="co"># Base R</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2">x[<span class="dv">1</span>, <span class="dv">2</span>]</a></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb69-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   age_dx
##    &lt;dbl&gt;
## 1     54</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="co"># Base R</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2">x[x<span class="op">$</span>age_visit <span class="op">&gt;</span><span class="st"> </span>x<span class="op">$</span>age_dx, <span class="st">&quot;tumor_size&quot;</span>]</a></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(age_visit <span class="op">&gt;</span><span class="st"> </span>age_dx) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(tumor_size)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 1
##   tumor_size
##        &lt;dbl&gt;
## 1        9.5
## 2        9.7
## 3        9.9
## 4       10.1</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="co"># Base R</span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2">x[x<span class="op">$</span>age_visit <span class="op">&gt;</span><span class="st"> </span>x<span class="op">$</span>age_dx, ]<span class="op">$</span>tumor_size</a></code></pre></div>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">x <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(age_visit <span class="op">&gt;</span><span class="st"> </span>age_dx) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb75-3" data-line-number="3"><span class="st">  </span><span class="kw">pull</span>(tumor_size)</a></code></pre></div>
<pre><code>## [1]  9.5  9.7  9.9 10.1</code></pre>
</div>
</div>
<div id="wtf-what-the-factor" class="section level3">
<h3>WTF: What the Factor?</h3>
<p>Imagine you have a variable that records months:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">m &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dec&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;May&quot;</span>)</a></code></pre></div>
<p>Using a string for this variable has two problems:</p>
<ol style="list-style-type: decimal">
<li><p>There are only 12 possible values. What if you make a mistake?</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">m2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dev&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Seo&quot;</span>, <span class="st">&quot;May&quot;</span>)</a></code></pre></div></li>
<li><p>You can’t sort in a useful way.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="kw">sort</span>(m)</a></code></pre></div>
<pre><code>## [1] &quot;Dec&quot; &quot;May&quot; &quot;Oct&quot; &quot;Sep&quot;</code></pre></li>
</ol>
<p>A <strong>factor</strong> solves both of these problems:</p>
<ol style="list-style-type: decimal">
<li><p>It adds the concept of a categorical <em>level</em></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">month_levels &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb81-2" data-line-number="2">  <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jun&quot;</span>, </a>
<a class="sourceLine" id="cb81-3" data-line-number="3">  <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Dec&quot;</span></a>
<a class="sourceLine" id="cb81-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb81-5" data-line-number="5">m &lt;-<span class="st"> </span><span class="kw">factor</span>(m, <span class="dt">levels =</span> month_levels)</a>
<a class="sourceLine" id="cb81-6" data-line-number="6">m</a></code></pre></div>
<pre><code>## [1] Dec Oct Sep May
## Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre></li>
<li><p>that have an explicit order</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="kw">sort</span>(m)</a></code></pre></div>
<pre><code>## [1] May Sep Oct Dec
## Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre></li>
</ol>
<p>If you try to create a factor with a typo, you’ll get a missing value</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1"><span class="kw">factor</span>(m2, <span class="dt">levels =</span> month_levels)</a></code></pre></div>
<pre><code>## [1] &lt;NA&gt; Oct  &lt;NA&gt; May 
## Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
<div id="package-spotlings-forcats" class="section level4">
<h4>Package Spotlings: <span class="pkg">forcats</span></h4>
<p>If you end up needing to work with factors, try <a href="https://forcats.tidyverse.org"><span class="pkg">forcats</span></a>.</p>
<p><a href="https://forcats.tidyverse.org"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/forcats.png" class="img-right" style="max-width: 150px" /></a></p>
<blockquote>
<p>R uses factors to handle categorical variables, variables that have a fixed and known set of possible values. Historically, factors were much easier to work with than character vectors, so many base R functions automatically convert character vectors to factors.</p>
<p>These days, making factors automatically is no longer so helpful, so packages in the tidyverse never create them automatically. However, factors are still useful when you have true categorical data, and when you want to override the ordering of character vectors to improve display. The goal of <a href="https://forcats.tidyverse.org">the forcats package</a> is to provide a suite of useful tools that solve common problems with factors.</p>
</blockquote>
<p>To load <a href="https://forcats.tidyverse.org"><span class="pkg">forcats</span></a>:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb87-2" data-line-number="2"></a>
<a class="sourceLine" id="cb87-3" data-line-number="3"><span class="co"># or</span></a>
<a class="sourceLine" id="cb87-4" data-line-number="4"><span class="kw">library</span>(forcats)</a></code></pre></div>
</div>
</div>
</div>
<div id="project-management-tips" class="section level2">
<h2>Project Management Tips</h2>
<ol style="list-style-type: decimal">
<li><p>Start a new project, start a new <strong>RStudio</strong> project.</p></li>
<li><p>Save “clean” code: have one file that runs your analysis</p>
<ul>
<li><p>Write scratch code in console or a script</p></li>
<li><p>Save working code into a <em>good</em> script</p></li>
<li><p>Restart R and run from the beginning after you lock-in each step</p></li>
</ul></li>
<li><p>When you’re comfortable, turn off saving <code>.RData</code> in RStudio Settings</p>
<p><img src="images/rstudio-13-no-save-restore.png" class="img-mw500" /></p></li>
</ol>
</div>
<div id="looking-forward" class="section level2">
<h2>Looking Forward</h2>
<div id="bi-weekly-workshops" class="section level3">
<h3>Bi-Weekly Workshops</h3>
<p>Every other week, starting the week of September 17, 2018. What time works for you?</p>
<p><a href="http://whenisgood.net/gerkelab/cds-r-follow-up" class="uri">http://whenisgood.net/gerkelab/cds-r-follow-up</a></p>
<div id="goals" class="section level4">
<h4>Goals</h4>
<ol style="list-style-type: decimal">
<li><p>Collaborative workspace for problem solving</p></li>
<li><p>Learn more programming and data processing techniques</p></li>
</ol>
</div>
</div>
<div id="potential-topics" class="section level3">
<h3>Potential Topics</h3>
<ol style="list-style-type: decimal">
<li><p>Creating data-driven reports with <a href="https://rmarkdown.rstudio.com/">R Markdown</a>.</p></li>
<li><p>Visualizing data with <a href="https://ggplot2.tidyverse.org/">ggplot2</a></p></li>
<li><p>Writing functions for repeatable analysis</p></li>
<li><p>Using version control software to track changes</p></li>
<li><p>Accessing data stored in databases with <a href="https://dbplyr.tidyverse.org/">dbplyr</a></p></li>
</ol>
</div>
<div id="stay-in-touch" class="section level3">
<h3>Stay in Touch!</h3>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
